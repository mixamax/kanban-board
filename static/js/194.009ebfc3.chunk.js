"use strict";(self.webpackChunkproject_planner=self.webpackChunkproject_planner||[]).push([[194],{8194:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var s=n(9439),a=n(6756),i=n(2641),r=n(4942),o=n(2791),l=n(1694),c=n.n(l),d=n(5501);function u(e){return["small","middle","large"].includes(e)}function m(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}var p=n(1929),v=n(11),f=o.createContext({latestIndex:0}),k=f.Provider,x=function(e){var t=e.className,n=e.index,s=e.children,a=e.split,i=e.style,r=o.useContext(f).latestIndex;return null===s||void 0===s?null:o.createElement(o.Fragment,null,o.createElement("div",{className:t,style:i},s),n<r&&a&&o.createElement("span",{className:"".concat(t,"-split")},a))},h=n(1294),j=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n},y=o.forwardRef((function(e,t){var n,a,i,l=o.useContext(p.E_),v=l.getPrefixCls,f=l.space,y=l.direction,g=e.size,Z=void 0===g?(null===f||void 0===f?void 0:f.size)||"small":g,b=e.align,N=e.className,D=e.rootClassName,w=e.children,O=e.direction,C=void 0===O?"horizontal":O,I=e.prefixCls,T=e.split,P=e.style,_=e.wrap,S=void 0!==_&&_,F=e.classNames,E=e.styles,z=j(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),M=Array.isArray(Z)?Z:[Z,Z],q=(0,s.Z)(M,2),L=q[0],W=q[1],$=u(W),A=u(L),J=m(W),G=m(L),H=(0,d.Z)(w,{keepEmpty:!0}),Q=void 0===b&&"horizontal"===C?"center":b,R=v("space",I),V=(0,h.Z)(R),K=(0,s.Z)(V,2),U=K[0],B=K[1],Y=c()(R,null===f||void 0===f?void 0:f.className,B,"".concat(R,"-").concat(C),(n={},(0,r.Z)(n,"".concat(R,"-rtl"),"rtl"===y),(0,r.Z)(n,"".concat(R,"-align-").concat(Q),Q),(0,r.Z)(n,"".concat(R,"-gap-row-").concat(W),$),(0,r.Z)(n,"".concat(R,"-gap-col-").concat(L),A),n),N,D),X=c()("".concat(R,"-item"),null!==(a=null===F||void 0===F?void 0:F.item)&&void 0!==a?a:null===(i=null===f||void 0===f?void 0:f.classNames)||void 0===i?void 0:i.item),ee=0,te=H.map((function(e,t){var n,s;null!==e&&void 0!==e&&(ee=t);var a=e&&e.key||"".concat(X,"-").concat(t);return o.createElement(x,{className:X,key:a,index:t,split:T,style:null!==(n=null===E||void 0===E?void 0:E.item)&&void 0!==n?n:null===(s=null===f||void 0===f?void 0:f.styles)||void 0===s?void 0:s.item},e)})),ne=o.useMemo((function(){return{latestIndex:ee}}),[ee]);if(0===H.length)return null;var se={};return S&&(se.flexWrap="wrap"),!A&&G&&(se.columnGap=L),!$&&J&&(se.rowGap=W),U(o.createElement("div",Object.assign({ref:t,className:Y,style:Object.assign(Object.assign(Object.assign({},se),null===f||void 0===f?void 0:f.style),P)},z),o.createElement(k,{value:ne},te)))}));var g=y;g.Compact=v.ZP;var Z=g,b=n(9286),N=n(1392),D=n(618),w=n(184),O=function(){var e=a.Z.Content,t=(0,o.useState)(!1),n=(0,s.Z)(t,2),r=n[0],l=n[1],c=(0,D.v9)((function(e){return e.reduserProjects}));return(0,w.jsxs)(e,{style:{minHeight:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,w.jsx)(i.ZP,{onClick:function(){return l(!0)},type:"primary",shape:"circle",icon:(0,w.jsx)(b.Z,{}),size:"large",style:{marginTop:"2rem",boxShadow:"0px 0px 20px 2px rgba(0, 0, 0, .35)",backgroundColor:"green"}}),(0,w.jsxs)(Z,{size:"large",align:"start",wrap:!0,style:{minHeight:"80%",minWidth:"95%",maxWidth:"95%",marginTop:"2rem",border:"solid 1px rgba(255, 255, 255, 1)",borderRadius:"10px",padding:"1rem",flexGrow:"1",overflowY:"auto"},children:[c.ids.map((function(e){return(0,w.jsx)(N.t,{linkName:e,name:c.entities[e].name,description:c.entities[e].description},e)})),(0,w.jsx)(N.FA,{isModalOpen:r,close:function(){l(!1)}})]})]})}},1392:function(e,t,n){n.d(t,{t:function(){return r},FA:function(){return p},K9:function(){return F},WH:function(){return w}});var s=n(4177),a=n(1087),i=n(184),r=function(e){var t=e.name,n=e.description,r=e.linkName;return(0,i.jsx)(a.rU,{to:"/task/".concat(r),children:(0,i.jsx)(s.Z,{hoverable:!0,title:t,bordered:!1,style:{width:250},bodyStyle:{display:"flex",overflow:"hidden",padding:"1rem",minHeight:"8rem",maxHeight:"8rem"},children:(0,i.jsx)("p",{style:{margin:"0",overflow:"auto",overflowWrap:"break-word"},children:n})})})},o=n(1413),l=n(9439),c=n(1515),d=n(1243),u=n(668),m=n(3855),p=function(e){var t=e.isModalOpen,n=e.close,s=c.Z.useForm(),a=(0,l.Z)(s,1)[0],r=(0,m.I0)(),p=(0,m.I0)();return(0,i.jsx)(d.Z,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430",centered:!0,open:t,onOk:a.submit,onCancel:function(){a.resetFields(),n()},children:(0,i.jsxs)(c.Z,(0,o.Z)((0,o.Z)({preserve:!1,form:a},{labelCol:{span:8},wrapperCol:{span:16}}),{},{name:"project",style:{maxWidth:600},validateMessages:{required:"${label} is required!"},onFinish:function(e){var t=e.project,s=void 0===t?{}:t,a=s.name,i=void 0===a?"":a,o=s.description;r({type:"addProject",payload:{projectName:i,projectDescription:void 0===o?"":o}}),p({type:"addProjectTasks",payload:{projectName:i}}),n()},children:[(0,i.jsx)(c.Z.Item,{name:["project","name"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0}],children:(0,i.jsx)(u.Z,{})}),(0,i.jsx)(c.Z.Item,{name:["project","description"],label:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:(0,i.jsx)(u.Z.TextArea,{})})]}))})},v="tasksContainer_tasks-column-cont__cQIDY",f="tasksContainer_task-column__-fdI0",k="task_task-cont__PNZuU",x="task_task-title__KzE8K",h="task_task-start__VNPs3",j=n(3893),y=n(8218),g=function(e){var t,n=e.id,s=e.title,a=e.start,r=e.activeId,l=e.priority,c=e.endDate,d=e.setOpenTaskDescriptionModal,u=(0,j.nB)({id:n}),m=u.attributes,p=u.listeners,v=u.setNodeRef,f=u.transform,g=u.transition,Z={transform:y.ux.Transform.toString(f),transition:g},b=new Date(a).toLocaleString("ru",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"});c&&(t=new Date(c).toLocaleString("ru",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}));var N=n===r;return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",(0,o.Z)((0,o.Z)((0,o.Z)({ref:v,style:Z},m),p),{},{children:(0,i.jsxs)("div",{onClick:d,className:"".concat(k),hidden:N,style:{backgroundColor:function(e){return 1===e?"rgb(211,254,171)":2===e?"rgb(248,251,167)":3===e?"rgb(235, 13, 13, 0.4)":"rgba(220, 216, 216, 0.6)"}(l)},children:[(0,i.jsx)("span",{className:x,children:s}),(0,i.jsx)("span",{className:h,children:"\u043d\u0430\u0447\u0430\u0442\u0430: ".concat(b)}),(0,i.jsx)("span",{className:h,children:c?"\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430: ".concat(t):"\u043d\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"})]})})),(0,i.jsx)("div",{style:{zIndex:"1",width:"5rem",background:"grey",height:"1.4rem",clipPath:"polygon(0% 0%, 100% 0%, 70% 100%, 0% 100%)",paddingLeft:"0.2rem",color:"white",cursor:"pointer"},onClick:function(){return d(n)},children:"\u043e\u0442\u043a\u0440\u044b\u0442\u044c"})]})},Z=n(2791),b=n(618),N=n(1478),D=function(e){return e.reduserTascs},w=function(e){var t=e.projectName,n=e.setOpenTaskDescriptionModal,s=(0,b.v9)(D)[t],a=(0,Z.useState)(null),r=(0,l.Z)(a,2),o=r[0],c=r[1],d=(0,m.I0)(),u=(0,N.Dy)((0,N.VT)(N.LO,{activationConstraint:{delay:250,tolerance:5}}),(0,N.VT)(N.we),(0,N.VT)(N.Lg,{coordinateGetter:j.is}));function p(e){return s.tasks[e].columnName}function k(e){var t;return(null===s||void 0===s||null===(t=s.columns[e])||void 0===t?void 0:t.tasks)||[]}return(0,i.jsx)(N.LB,{sensors:u,collisionDetection:N.pE,onDragEnd:function(e){var n=e.active,a=e.over;if("Quie"===a.id||"Develop"===a.id||"Done"===a.id){var i=JSON.parse(JSON.stringify(s)),r=a.id,o=n.id,l=p(o);return i.columns[l].tasks=i.columns[l].tasks.filter((function(e){return e!==o})),i.columns[r].tasks.push(o),i.tasks[o].columnName=r,i.tasks[o].endDate="Done"===r?new Date:"",void d({type:"updateTasks",payload:{projectName:t,newItems:i}})}if(a.id!==n.id&&s.tasks[a.id].columnName!==s.tasks[n.id].columnName){var c=JSON.parse(JSON.stringify(s)),u=p(a.id),m=n.id,v=p(m);return c.columns[v].tasks=c.columns[v].tasks.filter((function(e){return e!==m})),c.columns[u].tasks.push(m),c.tasks[m].columnName=u,void d({type:"updateTasks",payload:{projectName:t,newItems:c}})}if(a.id!==n.id&&s.tasks[a.id].columnName===s.tasks[n.id].columnName){var f=JSON.parse(JSON.stringify(s)),k=n.id,x=a.id,h=p(k),y=f.columns[h].tasks.findIndex((function(e){return e===x})),g=f.columns[h].tasks.findIndex((function(e){return e===k})),Z=(0,j.Rp)(f.columns[h].tasks,g,y);return f.columns[h].tasks=Z,void d({type:"updateTasks",payload:{projectName:t,newItems:f}})}},onDragStart:function(e){var t=e.active;c(t.id)},children:(0,i.jsxs)("div",{className:v,children:[(0,i.jsx)("div",{className:f,children:(0,i.jsx)(j.Fo,{items:k("Quie"),strategy:j.qw,children:(0,i.jsx)(O,{id:"Quie",children:k("Quie").map((function(e){return(0,i.jsx)(g,{id:s.tasks[e].id,title:s.tasks[e].taskTitle,start:s.tasks[e].startDate,activeId:o,priority:s.tasks[e].priority,endDate:s.tasks[e].endDate,setOpenTaskDescriptionModal:n},s.tasks[e].id)}))})})}),(0,i.jsx)("div",{className:f,children:(0,i.jsx)(j.Fo,{items:k("Develop"),strategy:j.qw,children:(0,i.jsx)(O,{id:"Develop",children:k("Develop").map((function(e){return(0,i.jsx)(g,{id:s.tasks[e].id,title:s.tasks[e].taskTitle,start:s.tasks[e].startDate,activeId:o,priority:s.tasks[e].priority,endDate:s.tasks[e].endDate,setOpenTaskDescriptionModal:n},s.tasks[e].id)}))})})}),(0,i.jsxs)("div",{className:f,children:[(0,i.jsx)(j.Fo,{items:k("Done"),strategy:j.qw,children:(0,i.jsx)(O,{id:"Done",children:k("Done").map((function(e){return(0,i.jsx)(g,{id:s.tasks[e].id,title:s.tasks[e].taskTitle,start:s.tasks[e].startDate,activeId:o,priority:s.tasks[e].priority,endDate:s.tasks[e].endDate,setOpenTaskDescriptionModal:n},s.tasks[e].id)}))})}),(0,i.jsx)(N.y9,{children:o?(0,i.jsx)(g,{id:o,title:s.tasks[o].title,start:s.tasks[o].start}):null})]})]})})};function O(e){var t=e.id,n=e.children,s=(0,N.Zj)({id:t}).setNodeRef;return(0,i.jsx)("div",{ref:s,children:n})}var C=n(4206),I=n(4586),T=n(6474),P=n(2641),_=n(2351),S=n(4261),F=function(e){var t=e.isModalOpen,n=e.close,s=e.projectName,a=c.Z.useForm(),r=(0,l.Z)(a,1)[0],p=(0,Z.useState)(1),v=(0,l.Z)(p,2),f=v[0],k=v[1],x=(0,m.I0)(),h={name:"file",action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?C.ZP.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&C.ZP.error("".concat(e.file.name," file upload failed."))}};return(0,i.jsx)(d.Z,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u0437\u0430\u0434\u0430\u0447\u0438",centered:!0,open:t,onOk:r.submit,onCancel:function(){r.resetFields(),k(1),n()},children:(0,i.jsxs)(c.Z,(0,o.Z)((0,o.Z)({preserve:!1,form:r},{labelCol:{span:8},wrapperCol:{span:16}}),{},{name:"task",style:{maxWidth:600},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},onFinish:function(e){var t=e.task,a=void 0===t?{}:t,i=a.name,o=void 0===i?"":i,l=a.description,c=void 0===l?"":l;x({type:"addTask",payload:{projectName:s,taskName:"task-".concat((0,S.Z)()),taskTitle:o,taskDescription:c,startDate:new Date,priority:f||1,endDate:"",duration:"",subTask:{},files:{},comments:{}}}),n(),r.resetFields(),k(1)},children:[(0,i.jsx)(c.Z.Item,{name:["task","name"],label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0}],children:(0,i.jsx)(u.Z,{})}),(0,i.jsx)(c.Z.Item,{name:["task","description"],label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:(0,i.jsx)(u.Z.TextArea,{})}),(0,i.jsx)(c.Z.Item,{children:(0,i.jsxs)("div",{style:{margin:"1rem"},children:[(0,i.jsx)("span",{style:{margin:"1rem"},children:"\u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442: "}),(0,i.jsxs)(I.ZP.Group,{onChange:function(e){k(e.target.value)},name:"radiogroup",value:f,children:[(0,i.jsx)(I.ZP,{value:1,children:"\u043d\u0438\u0437\u043a\u0438\u0439"}),(0,i.jsx)(I.ZP,{value:2,children:"\u0441\u0440\u0435\u0434\u043d\u0438\u0439"}),(0,i.jsx)(I.ZP,{value:3,children:"\u0432\u044b\u0441\u043e\u043a\u0438\u0439"})]})]})}),(0,i.jsx)(T.Z,(0,o.Z)((0,o.Z)({},h),{},{children:(0,i.jsx)(P.ZP,{icon:(0,i.jsx)(_.Z,{}),children:"Click to Upload"})}))]}))})}}}]);
//# sourceMappingURL=194.009ebfc3.chunk.js.map